<h2>Mis Tareas</h2>
<form (ngSubmit)="saveTask()" #taskForm="ngForm">
  <input [(ngModel)]="formTitle" name="title" placeholder="Título" required />
  <input [(ngModel)]="formDescription" name="description" placeholder="Descripción" required />
  <select [(ngModel)]="formStatus" name="status" required>
    <option value="pendiente">Pendiente</option>
    <option value="en progreso">En progreso</option>
    <option value="completada">Completada</option>
  </select>
  <select [(ngModel)]="formPriority" name="priority" required>
    <option value="baja">Baja</option>
    <option value="media">Media</option>
    <option value="alta">Alta</option>
  </select>
  <label>Fecha de creación:</label>
  <input [(ngModel)]="formCreatedAt" name="createdAt" type="date" required />
  <label>Fecha de vencimiento:</label>
  <input [(ngModel)]="formDueDate" name="dueDate" type="date" required />
  <button type="submit">{{ editingIndex === null ? 'Agregar' : 'Actualizar' }}</button>
  <button type="button" (click)="resetForm()" *ngIf="editingIndex !== null">Cancelar</button>
</form>

<ul>
  <li *ngFor="let task of tasks; let i = index">
    <strong>{{ task.title }}</strong> - {{ task.description }}<br>
    Estado: {{ task.status }} | Prioridad: {{ task.priority }}<br>
    Creada: {{ task.createdAt | date:'shortDate' }}<br>
    Vence: {{ task.dueDate | date:'shortDate' }}<br>
    Tiempo restante: {{ getTimeLeft(task.dueDate) }}<br>
    <button (click)="toggleStatus(i)">
      {{ task.status === 'completada' ? 'Marcar como pendiente' : 'Marcar como completada' }}
    </button>
    <button (click)="editTask(i)">Editar</button>
    <button (click)="removeTask(i)">Eliminar</button>
  </li>
</ul>